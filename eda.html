{% extends 'base.html' %}
{% include 'navbar.html' %}

{% block content %}
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/css/bootstrap.min.css" rel="stylesheet">
<link href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css" rel="stylesheet">

<div class="container mt-4">
  <h1 class="mb-4 text-center">Exploratory Data Analysis (EDA)</h1>

  <!-- Plots Section -->
  <div class="row">
    {% for title, plot in plots.items %}
      <div class="col-md-6 mb-4 d-flex flex-column align-items-center">
        <h5 class="text-center mb-2">{{ title }}</h5>
        <img
          src="data:image/png;base64,{{ plot }}"
          alt="{{ title }}"
          class="img-fluid rounded shadow"
          style="max-width: 90%; height: auto;"
        />
      </div>
    {% endfor %}
  </div>

  <!-- Divider -->
  <hr class="my-5">

  <!-- Data Table Section -->
  <h3 class="mb-3 text-center">Sample of Submitted Loan Requests (First 10 Rows)</h3>
  <div class="table-responsive">
    <table class="table table-bordered table-hover table-striped align-middle">
      <thead class="table-dark">
        <tr>
          {% for col in data_table.0.keys %}
            <th>{{ col }}</th>
          {% endfor %}
        </tr>
      </thead>
      <tbody>
        {% for row in data_table %}
          <tr>
            {% for value in row.values %}
              <td>{{ value }}</td>
            {% endfor %}
          </tr>
        {% endfor %}
      </tbody>
    </table>
  </div>

  <!-- Back Button -->
  <div class="text-start mt-4">
    <a href="{% url 'loan_prediction:home' %}" class="btn btn-outline-primary btn-sm rounded-pill px-3">
      <i class="bi bi-arrow-left-circle"></i> Back to Home
    </a>
  </div>
</div>
{% endblock %}
